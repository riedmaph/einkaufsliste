DROP TABLE IF EXISTS Crawled.Brand;
DROP TABLE IF EXISTS Crawled.Attribute;
DROP TABLE IF EXISTS Crawled.Article;
DROP TABLE IF EXISTS Crawled.Category;
DROP TABLE IF EXISTS Crawled.Shop;

DROP SCHEMA IF EXISTS Crawled;

CREATE SCHEMA Crawled;

CREATE TABLE IF NOT EXISTS Crawled.Shop (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    url VARCHAR(255)
);

CREATE TABLE IF NOT EXISTS Crawled.Category (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    url VARCHAR(255),
    shop INT REFERENCES Crawled.Shop(id) ON DELETE CASCADE,
    category INT REFERENCES Crawled.Category(id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS Crawled.Article (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    price NUMERIC(10,2),
    unit VARCHAR(255),
    amount NUMERIC(10,2),
    url VARCHAR(255),
    category INT NOT NULL REFERENCES Crawled.Category(id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS Crawled.Attribute (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    content TEXT,
    article INT NOT NULL REFERENCES Crawled.Article(id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS Crawled.Brand (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    shop INT REFERENCES Crawled.Shop(id) ON DELETE CASCADE
);
